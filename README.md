# process-gpt-vue3

# Install

### supabase Initial Script

#### Easy way:
Using CLI and docker :  https://supabase.com/docs/guides/cli/getting-started
```
supabase init
supabase start
```
and navigate to the 

http://localhost:54323


#### Complex way:

```sh
# Get the code
git clone --depth 1 https://github.com/supabase/supabase

# Go to the docker folder
cd supabase/docker

# Copy the fake env vars
cp .env.example .env

# Pull the latest images
docker compose pull

# Start the services (in detached mode)
docker compose up -d
```

### Process GPT Initial Script
```sh
# 해당 PW값은 .env의 ANON_KEY 참고.

docker run -p 8080:8080 -e DB_URL=http://localhost:8000 -e DB_PW=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyAgCiAgICAicm9sZSI6ICJhbm9uIiwKICAgICJpc3MiOiAic3VwYWJhc2UtZGVtbyIsCiAgICAiaWF0IjogMTY0MTc2OTIwMCwKICAgICJleHAiOiAxNzk5NTM1NjAwCn0.dc_X5iR_VP_qT0zsiyj_I_OZ2T9FtRU2BBNWN8Bu4GE
```

# Initial SQL
```sql
create table configuration (
  key text primary key,
  value jsonb
);

create table todolist (
    id uuid primary key,
    user_id text,
    proc_inst_id text,
    proc_def_id text,
    activity_id text,
    start_date timestamp,
    end_date timestamp,
    status text,
    description text
);

create table organization (
  id bigint generated by default as identity,
  messages jsonb,
  organization_chart text
);

create table proc_def (
  id text primary key,
  name text,
  definition jsonb,
  bpmn text
);

create table
  public.proc_def_arcv (
    arcv_id text not null,
    proc_def_id text not null,
    version double precision not null,
    snapshot text null,
    "timeStamp" timestamp without time zone null default current_timestamp,
    diff text null,
    constraint proc_def_arcv_pkey primary key (arcv_id)
  ) tablespace pg_default;

create table
  public.chats (
    uuid text not null,
    id text not null,
    messages jsonb null,
    constraint chats_pkey primary key (uuid)
  ) tablespace pg_default;

create table
  public.calendar (
    uid text not null,
    data jsonb null,
    constraint calendar_pkey primary key (uid)
  ) tablespace pg_default;

create table
  public.chat_rooms (
    id text not null,
    participants jsonb not null,
    message jsonb null,
    name text null,
    constraint chat_rooms_pkey primary key (id)
  ) tablespace pg_default;
```

#### Don't forget to set the OPENAI_API_KEY for configuration:

- navigate to the supabase console:
http://localhost:54323

- find the configuration table and set the openai_key field as value set:
```
{
  "key": "sk-..."
}
```
